// SPDX-License-Identifier: MIT
const Web3 = require("web3");
const HDWalletProvider = require("@truffle/hdwallet-provider");
const contractAbi = require("./icoAbi.json");

async function deployICOContract(
  bytecode,
  icoData,
  urlData,
  privateKey,
  web3Provider
) {
  const provider = new HDWalletProvider({
    privateKeys: [privateKey],
    providerOrUrl: web3Provider,
  });

  const web3 = new Web3(provider);

  const accounts = await web3.eth.getAccounts();
  const owner = accounts[0];

  const contract = new web3.eth.Contract(contractAbi);

  const deployTransaction = contract.deploy({
    data: bytecode,
    arguments: [icoData, urlData],
  });

  const gas = await deployTransaction.estimateGas();
  const gasPrice = await web3.eth.getGasPrice();

  const options = {
    from: owner,
    gas,
    gasPrice,
  };

  const signedTransaction = await web3.eth.accounts.signTransaction(
    {
      data: deployTransaction.encodeABI(),
      gas: options.gas,
      gasPrice: options.gasPrice,
      from: options.from,
      nonce: await web3.eth.getTransactionCount(options.from),
    },
    privateKey
  );

  const receipt = await web3.eth.sendSignedTransaction(
    signedTransaction.rawTransaction
  );

  return receipt.contractAddress;
}

const bytecode = `6080604052600860000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16601b60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550600860020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16601c60006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550348015620000dd57600080fd5b50604051620054c8380380620054c883398181016040528101906200010391906200099d565b600073ffffffffffffffffffffffffffffffffffffffff16826000015173ffffffffffffffffffffffffffffffffffffffff160362000179576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620001709062000a66565b60405180910390fd5b6000826060015111620001c3576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620001ba9062000ad8565b60405180910390fd5b428260a00151116200020c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620002039062000b70565b60405180910390fd5b81600860008201518160000160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060208201518160010160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060408201518160020160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff160217905550606082015181600301556080820151816004015560a0820151816005015560c0820151816006015560e08201518160070155610100820151816008015590505080601160008201518160000190816200033e919062000dd3565b50602082015181600101908162000356919062000dd3565b5060408201518160020190816200036e919062000dd3565b50606082015181600301908162000386919062000dd3565b5060808201518160040190816200039e919062000dd3565b5060a0820151816005019081620003b6919062000dd3565b5060c0820151816006019081620003ce919062000dd3565b5060e0820151816007019081620003e6919062000dd3565b50610100820151816008019081620003ff919062000dd3565b5061012082015181600901908162000418919062000dd3565b50905050505062000eba565b6000604051905090565b600080fd5b600080fd5b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b62000488826200043d565b810181811067ffffffffffffffff82111715620004aa57620004a96200044e565b5b80604052505050565b6000620004bf62000424565b9050620004cd82826200047d565b919050565b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b60006200050482620004d7565b9050919050565b6200051681620004f7565b81146200052257600080fd5b50565b60008151905062000536816200050b565b92915050565b6000819050919050565b62000551816200053c565b81146200055d57600080fd5b50565b600081519050620005718162000546565b92915050565b6000610120828403121562000591576200059062000438565b5b6200059e610120620004b3565b90506000620005b08482850162000525565b6000830152506020620005c68482850162000525565b6020830152506040620005dc8482850162000525565b6040830152506060620005f28482850162000560565b6060830152506080620006088482850162000560565b60808301525060a06200061e8482850162000560565b60a08301525060c0620006348482850162000560565b60c08301525060e06200064a8482850162000560565b60e083015250610100620006618482850162000560565b6101008301525092915050565b600080fd5b600080fd5b600067ffffffffffffffff8211156200069657620006956200044e565b5b620006a1826200043d565b9050602081019050919050565b60005b83811015620006ce578082015181840152602081019050620006b1565b60008484015250505050565b6000620006f1620006eb8462000678565b620004b3565b90508281526020810184848401111562000710576200070f62000673565b5b6200071d848285620006ae565b509392505050565b600082601f8301126200073d576200073c6200066e565b5b81516200074f848260208601620006da565b91505092915050565b6000610140828403121562000772576200077162000438565b5b6200077f610140620004b3565b9050600082015167ffffffffffffffff811115620007a257620007a1620004d2565b5b620007b08482850162000725565b600083015250602082015167ffffffffffffffff811115620007d757620007d6620004d2565b5b620007e58482850162000725565b602083015250604082015167ffffffffffffffff8111156200080c576200080b620004d2565b5b6200081a8482850162000725565b604083015250606082015167ffffffffffffffff811115620008415762000840620004d2565b5b6200084f8482850162000725565b606083015250608082015167ffffffffffffffff811115620008765762000875620004d2565b5b620008848482850162000725565b60808301525060a082015167ffffffffffffffff811115620008ab57620008aa620004d2565b5b620008b98482850162000725565b60a08301525060c082015167ffffffffffffffff811115620008e057620008df620004d2565b5b620008ee8482850162000725565b60c08301525060e082015167ffffffffffffffff811115620009155762000914620004d2565b5b620009238482850162000725565b60e08301525061010082015167ffffffffffffffff8111156200094b576200094a620004d2565b5b620009598482850162000725565b6101008301525061012082015167ffffffffffffffff811115620009825762000981620004d2565b5b620009908482850162000725565b6101208301525092915050565b6000806101408385031215620009b857620009b76200042e565b5b6000620009c88582860162000577565b92505061012083015167ffffffffffffffff811115620009ed57620009ec62000433565b5b620009fb8582860162000758565b9150509250929050565b600082825260208201905092915050565b7f496e76616c696420746f6b656e00000000000000000000000000000000000000600082015250565b600062000a4e600d8362000a05565b915062000a5b8262000a16565b602082019050919050565b6000602082019050818103600083015262000a818162000a3f565b9050919050565b7f416d6f756e742073686f756c642062652067726561746572207468616e203000600082015250565b600062000ac0601f8362000a05565b915062000acd8262000a88565b602082019050919050565b6000602082019050818103600083015262000af38162000ab1565b9050919050565b7f556e6c6f636b20646174652073686f756c6420626520696e207468652066757460008201527f7572650000000000000000000000000000000000000000000000000000000000602082015250565b600062000b5860238362000a05565b915062000b658262000afa565b604082019050919050565b6000602082019050818103600083015262000b8b8162000b49565b9050919050565b600081519050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b6000600282049050600182168062000be557607f821691505b60208210810362000bfb5762000bfa62000b9d565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b60006008830262000c657fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8262000c26565b62000c71868362000c26565b95508019841693508086168417925050509392505050565b6000819050919050565b600062000cb462000cae62000ca8846200053c565b62000c89565b6200053c565b9050919050565b6000819050919050565b62000cd08362000c93565b62000ce862000cdf8262000cbb565b84845462000c33565b825550505050565b600090565b62000cff62000cf0565b62000d0c81848462000cc5565b505050565b5b8181101562000d345762000d2860008262000cf5565b60018101905062000d12565b5050565b601f82111562000d835762000d4d8162000c01565b62000d588462000c16565b8101602085101562000d68578190505b62000d8062000d778562000c16565b83018262000d11565b50505b505050565b600082821c905092915050565b600062000da86000198460080262000d88565b1980831691505092915050565b600062000dc3838362000d95565b9150826002028217905092915050565b62000dde8262000b92565b67ffffffffffffffff81111562000dfa5762000df96200044e565b5b62000e06825462000bcc565b62000e1382828562000d38565b600060209050601f83116001811462000e4b576000841562000e36578287015190505b62000e42858262000db5565b86555062000eb2565b601f19841662000e5b8662000c01565b60005b8281101562000e855784890151825560018201915060208501945060208101905062000e5e565b8683101562000ea5578489015162000ea1601f89168262000d95565b8355505b6001600288020188555050505b505050505050565b6145fe8062000eca6000396000f3fe608060405234801561001057600080fd5b50600436106101375760003560e01c80638f32d59b116100b8578063bdeaa88f1161007c578063bdeaa88f146102de578063c1cbbca7146102e8578063c2cc9aa514610304578063f43c4d8814610324578063fb05cffb14610342578063fc0c546a1461036057610137565b80638f32d59b1461023757806390d6b45f14610255578063a128fcf214610276578063b5cc2e1a146102a6578063b99a0cd7146102c257610137565b80635072b084116100ff5780635072b084146101b85780635600f04f146101c25780635d452201146101e95780637935e5a31461020f578063893da6c91461021957610137565b806323cc75a81461013c57806334b6646014610146578063384c6df3146101765780633fa1bba3146101925780634451d89f146101ae575b600080fd5b61014461037e565b005b610160600480360381019061015b9190612e5f565b6106b5565b60405161016d9190612ea5565b60405180910390f35b610190600480360381019061018b9190612eec565b6106cd565b005b6101ac60048036038101906101a7919061328a565b610910565b005b6101b6610ad1565b005b6101c0610c65565b005b6101ca610e5e565b6040516101e09a99989796959493929190613352565b60405180910390f35b6101f16113f0565b60405161020699989796959493929190613443565b60405180910390f35b61021761148c565b005b610221611685565b60405161022e9190612ea5565b60405180910390f35b61023f61168b565b60405161024c91906134eb565b60405180910390f35b61025d6116e6565b60405161026d9493929190613506565b60405180910390f35b610290600480360381019061028b9190612e5f565b611924565b60405161029d9190612ea5565b60405180910390f35b6102c060048036038101906102bb9190613567565b61193c565b005b6102dc60048036038101906102d7919061363e565b611a67565b005b6102e6611b15565b005b61030260048036038101906102fd919061367e565b611bc9565b005b61030c611d84565b60405161031b9392919061395b565b60405180910390f35b61032c612713565b6040516103399190613a02565b60405180910390f35b61034a612739565b6040516103579190613a1d565b60405180910390f35b61036861299b565b6040516103759190613a02565b60405180910390f35b61038661168b565b6103c5576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016103bc90613ab1565b60405180910390fd5b601e60019054906101000a900460ff1615610415576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161040c90613b1d565b60405180910390fd5b601b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd600860010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16306008600701546040518463ffffffff1660e01b815260040161049e93929190613b3d565b6020604051808303816000875af11580156104bd573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104e19190613ba0565b50601b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663095ea7b3600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166008600701546040518363ffffffff1660e01b8152600401610566929190613bcd565b6020604051808303816000875af1158015610585573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906105a99190613ba0565b50601e60029054906101000a900460ff16156105cc576105c76129c1565b610698565b601c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb600860010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff166008600701546040518363ffffffff1660e01b8152600401610653929190613bcd565b6020604051808303816000875af1158015610672573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906106969190613ba0565b505b6001601e60016101000a81548160ff021916908315150217905550565b60026020528060005260406000206000915090505481565b601e60009054906101000a900460ff161561071d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161071490613c42565b60405180910390fd5b600860050154421015801561073757506008600601544211155b610776576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161076d90613cae565b60405180910390fd5b600081116107b9576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107b090613d40565b60405180910390fd5b6000600860040154826107cc9190613d8f565b905081600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600082825461081d9190613dd1565b9250508190555081600360008573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550601b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3033846040518463ffffffff1660e01b81526004016108c793929190613b3d565b6020604051808303816000875af11580156108e6573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061090a9190613ba0565b50505050565b61091861168b565b610957576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161094e90613ab1565b60405180910390fd5b3373ffffffffffffffffffffffffffffffffffffffff16600860010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16146109ea576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109e190613e51565b60405180910390fd5b8060116000820151816000019081610a029190614073565b506020820151816001019081610a189190614073565b506040820151816002019081610a2e9190614073565b506060820151816003019081610a449190614073565b506080820151816004019081610a5a9190614073565b5060a0820151816005019081610a709190614073565b5060c0820151816006019081610a869190614073565b5060e0820151816007019081610a9c9190614073565b50610100820151816008019081610ab39190614073565b50610120820151816009019081610aca9190614073565b5090505050565b601e60019054906101000a900460ff16610b20576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b1790614191565b60405180910390fd5b6000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020549050600060086004015482610b779190613d8f565b9050601b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3033846040518463ffffffff1660e01b8152600401610bd893929190613b3d565b6020604051808303816000875af1158015610bf7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c1b9190613ba0565b506000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020819055505050565b6000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000205411610ce7576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610cde906141fd565b60405180910390fd5b601e60009054906101000a900460ff1615610d37576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610d2e90614269565b60405180910390fd5b601c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb33600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546040518363ffffffff1660e01b8152600401610dd3929190613bcd565b6020604051808303816000875af1158015610df2573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e169190613ba0565b506000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550565b6011806000018054610e6f90613ea0565b80601f0160208091040260200160405190810160405280929190818152602001828054610e9b90613ea0565b8015610ee85780601f10610ebd57610100808354040283529160200191610ee8565b820191906000526020600020905b815481529060010190602001808311610ecb57829003601f168201915b505050505090806001018054610efd90613ea0565b80601f0160208091040260200160405190810160405280929190818152602001828054610f2990613ea0565b8015610f765780601f10610f4b57610100808354040283529160200191610f76565b820191906000526020600020905b815481529060010190602001808311610f5957829003601f168201915b505050505090806002018054610f8b90613ea0565b80601f0160208091040260200160405190810160405280929190818152602001828054610fb790613ea0565b80156110045780601f10610fd957610100808354040283529160200191611004565b820191906000526020600020905b815481529060010190602001808311610fe757829003601f168201915b50505050509080600301805461101990613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461104590613ea0565b80156110925780601f1061106757610100808354040283529160200191611092565b820191906000526020600020905b81548152906001019060200180831161107557829003601f168201915b5050505050908060040180546110a790613ea0565b80601f01602080910402602001604051908101604052809291908181526020018280546110d390613ea0565b80156111205780601f106110f557610100808354040283529160200191611120565b820191906000526020600020905b81548152906001019060200180831161110357829003601f168201915b50505050509080600501805461113590613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461116190613ea0565b80156111ae5780601f10611183576101008083540402835291602001916111ae565b820191906000526020600020905b81548152906001019060200180831161119157829003601f168201915b5050505050908060060180546111c390613ea0565b80601f01602080910402602001604051908101604052809291908181526020018280546111ef90613ea0565b801561123c5780601f106112115761010080835404028352916020019161123c565b820191906000526020600020905b81548152906001019060200180831161121f57829003601f168201915b50505050509080600701805461125190613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461127d90613ea0565b80156112ca5780601f1061129f576101008083540402835291602001916112ca565b820191906000526020600020905b8154815290600101906020018083116112ad57829003601f168201915b5050505050908060080180546112df90613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461130b90613ea0565b80156113585780601f1061132d57610100808354040283529160200191611358565b820191906000526020600020905b81548152906001019060200180831161133b57829003601f168201915b50505050509080600901805461136d90613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461139990613ea0565b80156113e65780601f106113bb576101008083540402835291602001916113e6565b820191906000526020600020905b8154815290600101906020018083116113c957829003601f168201915b505050505090508a565b60088060000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16908060030154908060040154908060050154908060060154908060070154908060080154905089565b6000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020541161150e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611505906141fd565b60405180910390fd5b601e60019054906101000a900460ff161561155e576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611555906142d5565b60405180910390fd5b601c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663a9059cbb33600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020546040518363ffffffff1660e01b81526004016115fa929190613bcd565b6020604051808303816000875af1158015611619573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061163d9190613ba0565b506000600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002081905550565b601d5481565b6000600860010160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614905090565b60048060000180546116f790613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461172390613ea0565b80156117705780601f1061174557610100808354040283529160200191611770565b820191906000526020600020905b81548152906001019060200180831161175357829003601f168201915b50505050509080600101805461178590613ea0565b80601f01602080910402602001604051908101604052809291908181526020018280546117b190613ea0565b80156117fe5780601f106117d3576101008083540402835291602001916117fe565b820191906000526020600020905b8154815290600101906020018083116117e157829003601f168201915b50505050509080600201805461181390613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461183f90613ea0565b801561188c5780601f106118615761010080835404028352916020019161188c565b820191906000526020600020905b81548152906001019060200180831161186f57829003601f168201915b5050505050908060030180546118a190613ea0565b80601f01602080910402602001604051908101604052809291908181526020018280546118cd90613ea0565b801561191a5780601f106118ef5761010080835404028352916020019161191a565b820191906000526020600020905b8154815290600101906020018083116118fd57829003601f168201915b5050505050905084565b60036020528060005260406000206000915090505481565b60008054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166364efb22b336040518263ffffffff1660e01b815260040161199591906142f5565b602060405180830381865afa1580156119b2573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906119d69190613ba0565b611a15576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611a0c90614382565b60405180910390fd5b8360046000019081611a279190614073565b508260046001019081611a3a9190614073565b508160046003019081611a4d9190614073565b508060046002019081611a609190614073565b5050505050565b611a6f61168b565b611aae576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611aa590613ab1565b60405180910390fd5b814211158015611abe5750808211155b611afd576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611af4906143ee565b60405180910390fd5b81600860050181905550806008600601819055505050565b611b1d61168b565b611b5c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611b5390613ab1565b60405180910390fd5b601e60009054906101000a900460ff1615611bac576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611ba39061445a565b60405180910390fd5b6001601e60006101000a81548160ff021916908315150217905550565b601e60009054906101000a900460ff1615611c19576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611c1090613c42565b60405180910390fd5b6008600501544210158015611c3357506008600601544211155b611c72576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401611c6990613cae565b60405180910390fd5b600060086004015482611c859190613d8f565b9050601c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166323b872dd3330846040518463ffffffff1660e01b8152600401611ce693929190613b3d565b6020604051808303816000875af1158015611d05573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190611d299190613ba0565b5081600260003373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828254611d799190613dd1565b925050819055505050565b611d8c612ce4565b611d94612d72565b611d9c612dc5565b60086011600482604051806101200160405290816000820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016001820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020016002820160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168152602001600382015481526020016004820154815260200160058201548152602001600682015481526020016007820154815260200160088201548152505092508160405180610140016040529081600082018054611f0c90613ea0565b80601f0160208091040260200160405190810160405280929190818152602001828054611f3890613ea0565b8015611f855780601f10611f5a57610100808354040283529160200191611f85565b820191906000526020600020905b815481529060010190602001808311611f6857829003601f168201915b50505050508152602001600182018054611f9e90613ea0565b80601f0160208091040260200160405190810160405280929190818152602001828054611fca90613ea0565b80156120175780601f10611fec57610100808354040283529160200191612017565b820191906000526020600020905b815481529060010190602001808311611ffa57829003601f168201915b5050505050815260200160028201805461203090613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461205c90613ea0565b80156120a95780601f1061207e576101008083540402835291602001916120a9565b820191906000526020600020905b81548152906001019060200180831161208c57829003601f168201915b505050505081526020016003820180546120c290613ea0565b80601f01602080910402602001604051908101604052809291908181526020018280546120ee90613ea0565b801561213b5780601f106121105761010080835404028352916020019161213b565b820191906000526020600020905b81548152906001019060200180831161211e57829003601f168201915b5050505050815260200160048201805461215490613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461218090613ea0565b80156121cd5780601f106121a2576101008083540402835291602001916121cd565b820191906000526020600020905b8154815290600101906020018083116121b057829003601f168201915b505050505081526020016005820180546121e690613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461221290613ea0565b801561225f5780601f106122345761010080835404028352916020019161225f565b820191906000526020600020905b81548152906001019060200180831161224257829003601f168201915b5050505050815260200160068201805461227890613ea0565b80601f01602080910402602001604051908101604052809291908181526020018280546122a490613ea0565b80156122f15780601f106122c6576101008083540402835291602001916122f1565b820191906000526020600020905b8154815290600101906020018083116122d457829003601f168201915b5050505050815260200160078201805461230a90613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461233690613ea0565b80156123835780601f1061235857610100808354040283529160200191612383565b820191906000526020600020905b81548152906001019060200180831161236657829003601f168201915b5050505050815260200160088201805461239c90613ea0565b80601f01602080910402602001604051908101604052809291908181526020018280546123c890613ea0565b80156124155780601f106123ea57610100808354040283529160200191612415565b820191906000526020600020905b8154815290600101906020018083116123f857829003601f168201915b5050505050815260200160098201805461242e90613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461245a90613ea0565b80156124a75780601f1061247c576101008083540402835291602001916124a7565b820191906000526020600020905b81548152906001019060200180831161248a57829003601f168201915b5050505050815250509150806040518060800160405290816000820180546124ce90613ea0565b80601f01602080910402602001604051908101604052809291908181526020018280546124fa90613ea0565b80156125475780601f1061251c57610100808354040283529160200191612547565b820191906000526020600020905b81548152906001019060200180831161252a57829003601f168201915b5050505050815260200160018201805461256090613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461258c90613ea0565b80156125d95780601f106125ae576101008083540402835291602001916125d9565b820191906000526020600020905b8154815290600101906020018083116125bc57829003601f168201915b505050505081526020016002820180546125f290613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461261e90613ea0565b801561266b5780601f106126405761010080835404028352916020019161266b565b820191906000526020600020905b81548152906001019060200180831161264e57829003601f168201915b5050505050815260200160038201805461268490613ea0565b80601f01602080910402602001604051908101604052809291908181526020018280546126b090613ea0565b80156126fd5780601f106126d2576101008083540402835291602001916126fd565b820191906000526020600020905b8154815290600101906020018083116126e057829003601f168201915b5050505050815250509050925092509250909192565b601c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b612741612dc5565b600460405180608001604052908160008201805461275e90613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461278a90613ea0565b80156127d75780601f106127ac576101008083540402835291602001916127d7565b820191906000526020600020905b8154815290600101906020018083116127ba57829003601f168201915b505050505081526020016001820180546127f090613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461281c90613ea0565b80156128695780601f1061283e57610100808354040283529160200191612869565b820191906000526020600020905b81548152906001019060200180831161284c57829003601f168201915b5050505050815260200160028201805461288290613ea0565b80601f01602080910402602001604051908101604052809291908181526020018280546128ae90613ea0565b80156128fb5780601f106128d0576101008083540402835291602001916128fb565b820191906000526020600020905b8154815290600101906020018083116128de57829003601f168201915b5050505050815260200160038201805461291490613ea0565b80601f016020809104026020016040519081016040528092919081815260200182805461294090613ea0565b801561298d5780601f106129625761010080835404028352916020019161298d565b820191906000526020600020905b81548152906001019060200180831161297057829003601f168201915b505050505081525050905090565b601b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000601b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166370a08231306040518263ffffffff1660e01b8152600401612a1e91906142f5565b602060405180830381865afa158015612a3b573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612a5f919061448f565b9050601b60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663095ea7b373d99d1c33f9fc3444f8101754abc46c52416550d16008600701546040518363ffffffff1660e01b8152600401612ad7929190613bcd565b6020604051808303816000875af1158015612af6573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612b1a9190613ba0565b50601c60009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663095ea7b373d99d1c33f9fc3444f8101754abc46c52416550d16008600701546040518363ffffffff1660e01b8152600401612b91929190613bcd565b6020604051808303816000875af1158015612bb0573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612bd49190613ba0565b50600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1663e8e33700600860000160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600860020160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff168460086007015460008030610e1042612c789190613dd1565b6040518963ffffffff1660e01b8152600401612c9b9897969594939291906144f7565b6060604051808303816000875af1158015612cba573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190612cde9190614575565b50505050565b604051806101200160405280600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff168152602001600073ffffffffffffffffffffffffffffffffffffffff1681526020016000815260200160008152602001600081526020016000815260200160008152602001600081525090565b604051806101400160405280606081526020016060815260200160608152602001606081526020016060815260200160608152602001606081526020016060815260200160608152602001606081525090565b6040518060800160405280606081526020016060815260200160608152602001606081525090565b6000604051905090565b600080fd5b600080fd5b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b6000612e2c82612e01565b9050919050565b612e3c81612e21565b8114612e4757600080fd5b50565b600081359050612e5981612e33565b92915050565b600060208284031215612e7557612e74612df7565b5b6000612e8384828501612e4a565b91505092915050565b6000819050919050565b612e9f81612e8c565b82525050565b6000602082019050612eba6000830184612e96565b92915050565b612ec981612e8c565b8114612ed457600080fd5b50565b600081359050612ee681612ec0565b92915050565b60008060408385031215612f0357612f02612df7565b5b6000612f1185828601612e4a565b9250506020612f2285828601612ed7565b9150509250929050565b600080fd5b6000601f19601f8301169050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b612f7a82612f31565b810181811067ffffffffffffffff82111715612f9957612f98612f42565b5b80604052505050565b6000612fac612ded565b9050612fb88282612f71565b919050565b600080fd5b600080fd5b600080fd5b600067ffffffffffffffff821115612fe757612fe6612f42565b5b612ff082612f31565b9050602081019050919050565b82818337600083830152505050565b600061301f61301a84612fcc565b612fa2565b90508281526020810184848401111561303b5761303a612fc7565b5b613046848285612ffd565b509392505050565b600082601f83011261306357613062612fc2565b5b813561307384826020860161300c565b91505092915050565b6000610140828403121561309357613092612f2c565b5b61309e610140612fa2565b9050600082013567ffffffffffffffff8111156130be576130bd612fbd565b5b6130ca8482850161304e565b600083015250602082013567ffffffffffffffff8111156130ee576130ed612fbd565b5b6130fa8482850161304e565b602083015250604082013567ffffffffffffffff81111561311e5761311d612fbd565b5b61312a8482850161304e565b604083015250606082013567ffffffffffffffff81111561314e5761314d612fbd565b5b61315a8482850161304e565b606083015250608082013567ffffffffffffffff81111561317e5761317d612fbd565b5b61318a8482850161304e565b60808301525060a082013567ffffffffffffffff8111156131ae576131ad612fbd565b5b6131ba8482850161304e565b60a08301525060c082013567ffffffffffffffff8111156131de576131dd612fbd565b5b6131ea8482850161304e565b60c08301525060e082013567ffffffffffffffff81111561320e5761320d612fbd565b5b61321a8482850161304e565b60e08301525061010082013567ffffffffffffffff81111561323f5761323e612fbd565b5b61324b8482850161304e565b6101008301525061012082013567ffffffffffffffff81111561327157613270612fbd565b5b61327d8482850161304e565b6101208301525092915050565b6000602082840312156132a05761329f612df7565b5b600082013567ffffffffffffffff8111156132be576132bd612dfc565b5b6132ca8482850161307c565b91505092915050565b600081519050919050565b600082825260208201905092915050565b60005b8381101561330d5780820151818401526020810190506132f2565b60008484015250505050565b6000613324826132d3565b61332e81856132de565b935061333e8185602086016132ef565b61334781612f31565b840191505092915050565b600061014082019050818103600083015261336d818d613319565b90508181036020830152613381818c613319565b90508181036040830152613395818b613319565b905081810360608301526133a9818a613319565b905081810360808301526133bd8189613319565b905081810360a08301526133d18188613319565b905081810360c08301526133e58187613319565b905081810360e08301526133f98186613319565b905081810361010083015261340e8185613319565b90508181036101208301526134238184613319565b90509b9a5050505050505050505050565b61343d81612e21565b82525050565b600061012082019050613459600083018c613434565b613466602083018b613434565b613473604083018a613434565b6134806060830189612e96565b61348d6080830188612e96565b61349a60a0830187612e96565b6134a760c0830186612e96565b6134b460e0830185612e96565b6134c2610100830184612e96565b9a9950505050505050505050565b60008115159050919050565b6134e5816134d0565b82525050565b600060208201905061350060008301846134dc565b92915050565b600060808201905081810360008301526135208187613319565b905081810360208301526135348186613319565b905081810360408301526135488185613319565b9050818103606083015261355c8184613319565b905095945050505050565b6000806000806080858703121561358157613580612df7565b5b600085013567ffffffffffffffff81111561359f5761359e612dfc565b5b6135ab8782880161304e565b945050602085013567ffffffffffffffff8111156135cc576135cb612dfc565b5b6135d88782880161304e565b935050604085013567ffffffffffffffff8111156135f9576135f8612dfc565b5b6136058782880161304e565b925050606085013567ffffffffffffffff81111561362657613625612dfc565b5b6136328782880161304e565b91505092959194509250565b6000806040838503121561365557613654612df7565b5b600061366385828601612ed7565b925050602061367485828601612ed7565b9150509250929050565b60006020828403121561369457613693612df7565b5b60006136a284828501612ed7565b91505092915050565b6136b481612e21565b82525050565b6136c381612e8c565b82525050565b610120820160008201516136e060008501826136ab565b5060208201516136f360208501826136ab565b50604082015161370660408501826136ab565b50606082015161371960608501826136ba565b50608082015161372c60808501826136ba565b5060a082015161373f60a08501826136ba565b5060c082015161375260c08501826136ba565b5060e082015161376560e08501826136ba565b5061010082015161377a6101008501826136ba565b50505050565b600082825260208201905092915050565b600061379c826132d3565b6137a68185613780565b93506137b68185602086016132ef565b6137bf81612f31565b840191505092915050565b60006101408301600083015184820360008601526137e88282613791565b915050602083015184820360208601526138028282613791565b9150506040830151848203604086015261381c8282613791565b915050606083015184820360608601526138368282613791565b915050608083015184820360808601526138508282613791565b91505060a083015184820360a086015261386a8282613791565b91505060c083015184820360c08601526138848282613791565b91505060e083015184820360e086015261389e8282613791565b9150506101008301518482036101008601526138ba8282613791565b9150506101208301518482036101208601526138d68282613791565b9150508091505092915050565b600060808301600083015184820360008601526139008282613791565b9150506020830151848203602086015261391a8282613791565b915050604083015184820360408601526139348282613791565b9150506060830151848203606086015261394e8282613791565b9150508091505092915050565b60006101608201905061397160008301866136c9565b81810361012083015261398481856137ca565b905081810361014083015261399981846138e3565b9050949350505050565b6000819050919050565b60006139c86139c36139be84612e01565b6139a3565b612e01565b9050919050565b60006139da826139ad565b9050919050565b60006139ec826139cf565b9050919050565b6139fc816139e1565b82525050565b6000602082019050613a1760008301846139f3565b92915050565b60006020820190508181036000830152613a3781846138e3565b905092915050565b7f46756e6374696f6e2061636365737369626c65206f6e6c79206279207468652060008201527f6f776e6572210000000000000000000000000000000000000000000000000000602082015250565b6000613a9b6026836132de565b9150613aa682613a3f565b604082019050919050565b60006020820190508181036000830152613aca81613a8e565b9050919050565b7f49434f2068617320616c7265616479206265656e2066696e616c697a65640000600082015250565b6000613b07601e836132de565b9150613b1282613ad1565b602082019050919050565b60006020820190508181036000830152613b3681613afa565b9050919050565b6000606082019050613b526000830186613434565b613b5f6020830185613434565b613b6c6040830184612e96565b949350505050565b613b7d816134d0565b8114613b8857600080fd5b50565b600081519050613b9a81613b74565b92915050565b600060208284031215613bb657613bb5612df7565b5b6000613bc484828501613b8b565b91505092915050565b6000604082019050613be26000830185613434565b613bef6020830184612e96565b9392505050565b7f49434f20686173206265656e2063616e63656c65640000000000000000000000600082015250565b6000613c2c6015836132de565b9150613c3782613bf6565b602082019050919050565b60006020820190508181036000830152613c5b81613c1f565b9050919050565b7f49434f206973206e6f7420616374697665000000000000000000000000000000600082015250565b6000613c986011836132de565b9150613ca382613c62565b602082019050919050565b60006020820190508181036000830152613cc781613c8b565b9050919050565b7f436f6e747269627574696f6e20616d6f756e742073686f756c6420626520677260008201527f6561746572207468616e20300000000000000000000000000000000000000000602082015250565b6000613d2a602c836132de565b9150613d3582613cce565b604082019050919050565b60006020820190508181036000830152613d5981613d1d565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b6000613d9a82612e8c565b9150613da583612e8c565b9250828202613db381612e8c565b91508282048414831517613dca57613dc9613d60565b5b5092915050565b6000613ddc82612e8c565b9150613de783612e8c565b9250828201905080821115613dff57613dfe613d60565b5b92915050565b7f696e76616c6964206f776e657200000000000000000000000000000000000000600082015250565b6000613e3b600d836132de565b9150613e4682613e05565b602082019050919050565b60006020820190508181036000830152613e6a81613e2e565b9050919050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052602260045260246000fd5b60006002820490506001821680613eb857607f821691505b602082108103613ecb57613eca613e71565b5b50919050565b60008190508160005260206000209050919050565b60006020601f8301049050919050565b600082821b905092915050565b600060088302613f337fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82613ef6565b613f3d8683613ef6565b95508019841693508086168417925050509392505050565b6000613f70613f6b613f6684612e8c565b6139a3565b612e8c565b9050919050565b6000819050919050565b613f8a83613f55565b613f9e613f9682613f77565b848454613f03565b825550505050565b600090565b613fb3613fa6565b613fbe818484613f81565b505050565b5b81811015613fe257613fd7600082613fab565b600181019050613fc4565b5050565b601f82111561402757613ff881613ed1565b61400184613ee6565b81016020851015614010578190505b61402461401c85613ee6565b830182613fc3565b50505b505050565b600082821c905092915050565b600061404a6000198460080261402c565b1980831691505092915050565b60006140638383614039565b9150826002028217905092915050565b61407c826132d3565b67ffffffffffffffff81111561409557614094612f42565b5b61409f8254613ea0565b6140aa828285613fe6565b600060209050601f8311600181146140dd57600084156140cb578287015190505b6140d58582614057565b86555061413d565b601f1984166140eb86613ed1565b60005b82811015614113578489015182556001820191506020850194506020810190506140ee565b86831015614130578489015161412c601f891682614039565b8355505b6001600288020188555050505b505050505050565b7f49434f20686173206e6f742066696e616c697a65642079657400000000000000600082015250565b600061417b6019836132de565b915061418682614145565b602082019050919050565b600060208201905081810360008301526141aa8161416e565b9050919050565b7f796f7520617265206e6f7420636f6e7472696275746572000000000000000000600082015250565b60006141e76017836132de565b91506141f2826141b1565b602082019050919050565b60006020820190508181036000830152614216816141da565b9050919050565b7f49434f206973206e6f742063616e63656c656420796574000000000000000000600082015250565b60006142536017836132de565b915061425e8261421d565b602082019050919050565b6000602082019050818103600083015261428281614246565b9050919050565b7f49434f2068617320616c72656164792066696e616c6973656400000000000000600082015250565b60006142bf6019836132de565b91506142ca82614289565b602082019050919050565b600060208201905081810360008301526142ee816142b2565b9050919050565b600060208201905061430a6000830184613434565b92915050565b7f4f6e6c792061756469746f722063616e2065786563757465207468697320667560008201527f6e6374696f6e0000000000000000000000000000000000000000000000000000602082015250565b600061436c6026836132de565b915061437782614310565b604082019050919050565b6000602082019050818103600083015261439b8161435f565b9050919050565b7f656e642074696d657374616d7000000000000000000000000000000000000000600082015250565b60006143d8600d836132de565b91506143e3826143a2565b602082019050919050565b60006020820190508181036000830152614407816143cb565b9050919050565b7f69636f20697320616c726564792063616e63656c656400000000000000000000600082015250565b60006144446016836132de565b915061444f8261440e565b602082019050919050565b6000602082019050818103600083015261447381614437565b9050919050565b60008151905061448981612ec0565b92915050565b6000602082840312156144a5576144a4612df7565b5b60006144b38482850161447a565b91505092915050565b6000819050919050565b60006144e16144dc6144d7846144bc565b6139a3565b612e8c565b9050919050565b6144f1816144c6565b82525050565b60006101008201905061450d600083018b613434565b61451a602083018a613434565b6145276040830189612e96565b6145346060830188612e96565b61454160808301876144e8565b61454e60a08301866144e8565b61455b60c0830185613434565b61456860e0830184612e96565b9998505050505050505050565b60008060006060848603121561458e5761458d612df7565b5b600061459c8682870161447a565b93505060206145ad8682870161447a565b92505060406145be8682870161447a565b915050925092509256fea26469706673582212203c3a13dfa82067f90194cb098d74189cc9f8910fdb67749ab783d2fff595337364736f6c63430008120033`

// Usage example
const icoData = {
  tokenAddress: "0xCb0777c2C2A206ba0A3Af0425fd2CF62A17579C5",
  icoOwner: "0xCb0777c2C2A206ba0A3Af0425fd2CF62A17579C5",
  currency: "0xCb0777c2C2A206ba0A3Af0425fd2CF62A17579C5",
  icoAmount: 100000000000, // token amount for ico
  presaleRate: 10, // rate for presale
  startTimestamp: 9999999999999, // ico starting timestamp
  endTimestamp: 10999999999999, // ico ending timestamp
  liquidityAmount: 10, // token for liquidity
  refralRate: 20, // referral rate
};

const urlData = {
  website: "web5lab.com",
  logo: "https://chat.openai.com/",
  youtube: "https://chat.openai.com/",
  info: "https://chat.openai.com/",
  facebook: "https://chat.openai.com/",
  twitter: "https://chat.openai.com/",
  github: "https://chat.openai.com/",
  telegram: "https://chat.openai.com/",
  reddit: "https://chat.openai.com/",
  instagram: "https://chat.openai.com/",
};

const privateKey =
  "314db7b7bece4d4684f17d7df24ed88c64a907159da856cfe7020d847cfd62ed"; // Replace with your private key
const web3Provider = "https://data-seed-prebsc-1-s1.binance.org:8545";

deployICOContract(bytecode, icoData, urlData, privateKey, web3Provider)
  .then((contractAddress) => {
    console.log("Contract deployed successfully!");
    console.log("Contract address:", contractAddress);
  })
  .catch((error) => {
    console.error("Contract deployment failed:", error);
  });
